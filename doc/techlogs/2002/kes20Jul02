              Technical notes on version 1.23 20July02
                      20 July 2002
                       Kern Sibbald

General:
- Investigation of SQLite performace problems reported by Chuck.

Changes submitted this submission:
- Updated ChangeLog
- Updated README
- made root@localhost the default email address because many smtp
  servers reject root but accept root@localhost
- Added an autochangers chapter to the manual.
- Documented most of the new features in 1.23
- Modified the SQLite interface code to start a transaction at the
  beginning of a job and commit it at the end of the job. It
  also commits it after 10000 changes. Hopefully this will
  improve performance.
- Set the default cache pages from 2000 to 10000 for SQLite (i.e.
  about 15Megs of memory) hoping to improve performance.
- Terminate last filename referenced in FD prior to copy to
  avoid race problem with multiple threads and no locking.
- Enhanced the status output to include the JobType                
- Print an error message if the email program terminates in error.
- If your machine has an MTUNLOCK, do it before doing an OFFLINE to
  ensure that the door is unlocked.
- Added code to stored/append.c to spool attributes. This is in
  a testing stage and must be explicitly enabled.
- Added a no_attributes variable to stored/append.c that prevents
  the attributes from being sent to the Director. As yet, no way
  to turn it on.
- Modified SQLite code so that after 10000 updates any transaction
  is committed, then restarted. This keeps it from using too much
  memory.
- Set the default cache size to 10000 pages (previously 2000).
- Fixed a segmentation fault on Sun due to no default value for
  the JobStatus.
- Added the same indexes to SQLite that I exist in MySQL. This
  VASTLY reduces CPU usage for lots of inserts.
- Added spooling to bnet_send().
